{"version":3,"file":"ngx-alerts.js","sources":["ng://ngx-alerts/lib/model/alert.model.ts","ng://ngx-alerts/lib/model/alert-config.model.ts","ng://ngx-alerts/lib/alert.config.ts","ng://ngx-alerts/lib/service/alert.reducer.ts","ng://ngx-alerts/lib/service/alert.service.ts","ng://ngx-alerts/lib/component/alert.component.ts","ng://ngx-alerts/lib/alert.module.ts"],"sourcesContent":["export interface Alert {\n    content: string | { html: string };\n    type: 'warning' | 'danger' | 'info' | 'success';\n}\n","export interface AlertConfig {\n    maxMessages?: number;\n    timeout?: number;\n    position?: 'left' | 'right';\n}\n","import {AlertConfig} from './model/alert-config.model';\nimport {InjectionToken} from '@angular/core';\n\nexport const ALERT_CONFIG = new InjectionToken<AlertConfig>('config');\n","import {AlertConfig} from '../model/alert-config.model';\nimport {Alert} from '../model/alert.model';\n\n// @dynamic\nexport class AlertReducer {\n\n  public static reduce(state: Alert[], action: { fn: Function, alert: Alert, config: AlertConfig }): Alert[] {\n    return action.fn(state, {alert: action.alert, config: action.config});\n  }\n\n  public static add(state: Alert[], params: {alert: Alert, config: AlertConfig}): Alert[] {\n    const output = [\n      params.alert,\n      ...state\n    ];\n    if (output.length > params.config.maxMessages) {\n      output.pop();\n    }\n    return output;\n  }\n\n  public static remove(state: Alert[], params: {alert: Alert, config: AlertConfig}): Alert[] {\n    return state.filter(alert => alert !== params.alert);\n  }\n}\n","import {Inject, Injectable} from '@angular/core';\nimport {Alert} from '../model/alert.model';\nimport {BehaviorSubject, Observable, Subject, timer} from 'rxjs';\nimport {ALERT_CONFIG} from '../alert.config';\nimport {AlertConfig} from '../model/alert-config.model';\nimport {scan, take} from 'rxjs/internal/operators';\nimport {AlertReducer} from './alert.reducer';\n\n@Injectable()\nexport class AlertService {\n\n  private dispatcher = new Subject<{ fn: Function, alert: Alert, config: AlertConfig }>();\n  private state = new BehaviorSubject<Alert[]>([]);\n\n  constructor(@Inject(ALERT_CONFIG) private config: AlertConfig) {\n    this.initConfig();\n    this.dispatcher\n      .pipe(\n        scan(AlertReducer.reduce, [])\n      )\n      .subscribe(this.state);\n  }\n\n  private initConfig(): void {\n    if (!this.config) {\n      this.config = {};\n    }\n    this.config.timeout = !!this.config.timeout ? this.config.timeout : 5000;\n    this.config.maxMessages = !!this.config.maxMessages ? this.config.maxMessages : 5;\n  }\n\n  public get messages(): Observable<Alert[]> {\n    return this.state.asObservable();\n  }\n\n  public info(msg: string | { html: string }): void {\n    this.addAlert({content: msg, type: 'info'});\n  }\n\n  public danger(msg: string | { html: string }): void {\n    this.addAlert({content: msg, type: 'danger'});\n  }\n\n  public success(msg: string | { html: string }): void {\n    this.addAlert({content: msg, type: 'success'});\n  }\n\n  public warning(msg: string | { html: string }): void {\n    this.addAlert({content: msg, type: 'warning'});\n  }\n\n  public close(alert: Alert): void {\n    this.dispatcher.next({fn: AlertReducer.remove, alert: alert, config: this.config});\n  }\n\n  private addAlert(alert: Alert): void {\n    this.dispatcher.next({fn: AlertReducer.add, alert: alert, config: this.config});\n\n    if (this.config.timeout > 0) {\n      timer(this.config.timeout)\n        .pipe(take(1))\n        .subscribe(() => {\n          this.dispatcher.next({fn: AlertReducer.remove, alert: alert, config: this.config});\n        });\n    }\n  }\n}\n","import {ChangeDetectionStrategy, Component, Inject, OnInit} from '@angular/core';\nimport {AlertService} from '../service/alert.service';\nimport {Alert} from '../model/alert.model';\nimport {animate, state, style, transition, trigger} from '@angular/animations';\nimport {Observable} from 'rxjs';\nimport {ALERT_CONFIG} from '../alert.config';\nimport {AlertConfig} from '../model/alert-config.model';\n\n@Component({\n  selector: 'ngx-alerts',\n  templateUrl: './alert.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styleUrls: ['./alert.component.scss'],\n  animations: [\n    trigger('animationRight', [\n      state('shown', style({transform: 'translateX(0)', opacity: 0.8})),\n      transition(':enter', [\n        style({transform: 'translateX(100%)', opacity: 0}),\n        animate('300ms 100ms ease', style({transform: 'translateX(0)', opacity: 0.8}))\n      ]),\n      transition(':leave', [\n        style({transform: 'translateX(0)', opacity: 0.8}),\n        animate('200ms ease-out', style({transform: 'translateX(100%)', opacity: 0}))\n      ])]\n    ),\n    trigger('animationLeft', [\n      state('shown', style({transform: 'translateX(0)', opacity: 0.8})),\n      transition(':enter', [\n        style({transform: 'translateX(-100%)', opacity: 0}),\n        animate('300ms 100ms ease', style({transform: 'translateX(0)', opacity: 0.8}))\n      ]),\n      transition(':leave', [\n        style({transform: 'translateX(0)', opacity: 0.8}),\n        animate('200ms ease-out', style({transform: 'translateX(-100%)', opacity: 0}))\n      ])]\n    )\n  ]\n})\nexport class AlertComponent implements OnInit {\n\n  alerts: Observable<Alert[]>;\n\n  constructor(\n    @Inject(ALERT_CONFIG) private config: AlertConfig,\n    private alertService: AlertService) {\n    this.initConfig();\n  }\n\n  ngOnInit() {\n    this.alerts = this.alertService.messages;\n  }\n\n  close(alert: Alert) {\n    this.alertService.close(alert);\n  }\n\n  get position() {\n    return this.config.position;\n  }\n\n  private initConfig(): void {\n    if (!this.config) {\n      this.config = {};\n    }\n    this.config.position = !!this.config.position ? this.config.position : 'right';\n  }\n}\n","import {ModuleWithProviders, NgModule} from '@angular/core';\nimport {AlertComponent} from './component/alert.component';\nimport {AlertService} from './service/alert.service';\nimport {CommonModule} from '@angular/common';\nimport {ALERT_CONFIG} from './alert.config';\nimport {AlertConfig} from './model/alert-config.model';\n\n@NgModule({\n    declarations: [\n        AlertComponent\n    ],\n    imports: [\n        CommonModule\n    ],\n    exports: [\n        AlertComponent\n    ]\n})\nexport class AlertModule {\n    static forRoot(config?: AlertConfig): ModuleWithProviders {\n        return {\n            ngModule: AlertModule,\n            providers: [\n                AlertService,\n                {provide: ALERT_CONFIG, useValue: config}\n            ]\n        };\n    }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,oBAGC;;;IAFG,wBAAmC;;IACnC,qBAAgD;;;;;;;;;;ACFpD,0BAIC;;;IAHG,kCAAqB;;IACrB,8BAAiB;;IACjB,+BAA4B;;;;;;;ACFhC;AAEA,IAAa,YAAY,GAAG,IAAI,cAAc,CAAc,QAAQ,CAAC;;;;;;;ACCrE;;;IAAA;KAoBC;;;;;;IAlBe,mBAAM;;;;;IAApB,UAAqB,KAAc,EAAE,MAA2D;QAC9F,OAAO,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,EAAC,KAAK,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAC,CAAC,CAAC;KACvE;;;;;;IAEa,gBAAG;;;;;IAAjB,UAAkB,KAAc,EAAE,MAA2C;;YACrE,MAAM;YACV,MAAM,CAAC,KAAK;WACT,KAAK,CACT;QACD,IAAI,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,EAAE;YAC7C,MAAM,CAAC,GAAG,EAAE,CAAC;SACd;QACD,OAAO,MAAM,CAAC;KACf;;;;;;IAEa,mBAAM;;;;;IAApB,UAAqB,KAAc,EAAE,MAA2C;QAC9E,OAAO,KAAK,CAAC,MAAM;;;;QAAC,UAAA,KAAK,IAAI,OAAA,KAAK,KAAK,MAAM,CAAC,KAAK,GAAA,EAAC,CAAC;KACtD;IACH,mBAAC;CAAA,IAAA;;;;;;ACxBD;IAcE,sBAA0C,MAAmB;QAAnB,WAAM,GAAN,MAAM,CAAa;QAHrD,eAAU,GAAG,IAAI,OAAO,EAAuD,CAAC;QAChF,UAAK,GAAG,IAAI,eAAe,CAAU,EAAE,CAAC,CAAC;QAG/C,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,UAAU;aACZ,IAAI,CACH,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,EAAE,CAAC,CAC9B;aACA,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAC1B;;;;;IAEO,iCAAU;;;;IAAlB;QACE,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YAChB,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;SAClB;QACD,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;QACzE,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,CAAC,CAAC;KACnF;IAED,sBAAW,kCAAQ;;;;QAAnB;YACE,OAAO,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC;SAClC;;;OAAA;;;;;IAEM,2BAAI;;;;IAAX,UAAY,GAA8B;QACxC,IAAI,CAAC,QAAQ,CAAC,EAAC,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,MAAM,EAAC,CAAC,CAAC;KAC7C;;;;;IAEM,6BAAM;;;;IAAb,UAAc,GAA8B;QAC1C,IAAI,CAAC,QAAQ,CAAC,EAAC,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,QAAQ,EAAC,CAAC,CAAC;KAC/C;;;;;IAEM,8BAAO;;;;IAAd,UAAe,GAA8B;QAC3C,IAAI,CAAC,QAAQ,CAAC,EAAC,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,SAAS,EAAC,CAAC,CAAC;KAChD;;;;;IAEM,8BAAO;;;;IAAd,UAAe,GAA8B;QAC3C,IAAI,CAAC,QAAQ,CAAC,EAAC,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,SAAS,EAAC,CAAC,CAAC;KAChD;;;;;IAEM,4BAAK;;;;IAAZ,UAAa,KAAY;QACvB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAC,EAAE,EAAE,YAAY,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAC,CAAC,CAAC;KACpF;;;;;;IAEO,+BAAQ;;;;;IAAhB,UAAiB,KAAY;QAA7B,iBAUC;QATC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAC,EAAE,EAAE,YAAY,CAAC,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAC,CAAC,CAAC;QAEhF,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,CAAC,EAAE;YAC3B,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC;iBACvB,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBACb,SAAS;;;YAAC;gBACT,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAC,EAAE,EAAE,YAAY,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAI,CAAC,MAAM,EAAC,CAAC,CAAC;aACpF,EAAC,CAAC;SACN;KACF;;gBAzDF,UAAU;;;;gDAMI,MAAM,SAAC,YAAY;;IAoDlC,mBAAC;CA1DD,IA0DC;;;;;;IAvDC,kCAAwF;;;;;IACxF,6BAAiD;;;;;IAErC,8BAAiD;;;;;;;ACd/D;IA0CE,wBACgC,MAAmB,EACzC,YAA0B;QADJ,WAAM,GAAN,MAAM,CAAa;QACzC,iBAAY,GAAZ,YAAY,CAAc;QAClC,IAAI,CAAC,UAAU,EAAE,CAAC;KACnB;;;;IAED,iCAAQ;;;IAAR;QACE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;KAC1C;;;;;IAED,8BAAK;;;;IAAL,UAAM,KAAY;QAChB,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;KAChC;IAED,sBAAI,oCAAQ;;;;QAAZ;YACE,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;SAC7B;;;OAAA;;;;;IAEO,mCAAU;;;;IAAlB;QACE,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YAChB,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;SAClB;QACD,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,OAAO,CAAC;KAChF;;gBAzDF,SAAS,SAAC;oBACT,QAAQ,EAAE,YAAY;oBACtB,miCAAqC;oBACrC,eAAe,EAAE,uBAAuB,CAAC,MAAM;oBAE/C,UAAU,EAAE;wBACV,OAAO,CAAC,gBAAgB,EAAE;4BACxB,KAAK,CAAC,OAAO,EAAE,KAAK,CAAC,EAAC,SAAS,EAAE,eAAe,EAAE,OAAO,EAAE,GAAG,EAAC,CAAC,CAAC;4BACjE,UAAU,CAAC,QAAQ,EAAE;gCACnB,KAAK,CAAC,EAAC,SAAS,EAAE,kBAAkB,EAAE,OAAO,EAAE,CAAC,EAAC,CAAC;gCAClD,OAAO,CAAC,kBAAkB,EAAE,KAAK,CAAC,EAAC,SAAS,EAAE,eAAe,EAAE,OAAO,EAAE,GAAG,EAAC,CAAC,CAAC;6BAC/E,CAAC;4BACF,UAAU,CAAC,QAAQ,EAAE;gCACnB,KAAK,CAAC,EAAC,SAAS,EAAE,eAAe,EAAE,OAAO,EAAE,GAAG,EAAC,CAAC;gCACjD,OAAO,CAAC,gBAAgB,EAAE,KAAK,CAAC,EAAC,SAAS,EAAE,kBAAkB,EAAE,OAAO,EAAE,CAAC,EAAC,CAAC,CAAC;6BAC9E,CAAC;yBAAC,CACJ;wBACD,OAAO,CAAC,eAAe,EAAE;4BACvB,KAAK,CAAC,OAAO,EAAE,KAAK,CAAC,EAAC,SAAS,EAAE,eAAe,EAAE,OAAO,EAAE,GAAG,EAAC,CAAC,CAAC;4BACjE,UAAU,CAAC,QAAQ,EAAE;gCACnB,KAAK,CAAC,EAAC,SAAS,EAAE,mBAAmB,EAAE,OAAO,EAAE,CAAC,EAAC,CAAC;gCACnD,OAAO,CAAC,kBAAkB,EAAE,KAAK,CAAC,EAAC,SAAS,EAAE,eAAe,EAAE,OAAO,EAAE,GAAG,EAAC,CAAC,CAAC;6BAC/E,CAAC;4BACF,UAAU,CAAC,QAAQ,EAAE;gCACnB,KAAK,CAAC,EAAC,SAAS,EAAE,eAAe,EAAE,OAAO,EAAE,GAAG,EAAC,CAAC;gCACjD,OAAO,CAAC,gBAAgB,EAAE,KAAK,CAAC,EAAC,SAAS,EAAE,mBAAmB,EAAE,OAAO,EAAE,CAAC,EAAC,CAAC,CAAC;6BAC/E,CAAC;yBAAC,CACJ;qBACF;;iBACF;;;;gDAMI,MAAM,SAAC,YAAY;gBA1ChB,YAAY;;IAiEpB,qBAAC;CA1DD,IA0DC;;;IA1BC,gCAA4B;;;;;IAG1B,gCAAiD;;;;;IACjD,sCAAkC;;;;;;;AC5CtC;IAOA;KAqBC;;;;;IATU,mBAAO;;;;IAAd,UAAe,MAAoB;QAC/B,OAAO;YACH,QAAQ,EAAE,WAAW;YACrB,SAAS,EAAE;gBACP,YAAY;gBACZ,EAAC,OAAO,EAAE,YAAY,EAAE,QAAQ,EAAE,MAAM,EAAC;aAC5C;SACJ,CAAC;KACL;;gBApBJ,QAAQ,SAAC;oBACN,YAAY,EAAE;wBACV,cAAc;qBACjB;oBACD,OAAO,EAAE;wBACL,YAAY;qBACf;oBACD,OAAO,EAAE;wBACL,cAAc;qBACjB;iBACJ;;IAWD,kBAAC;CArBD;;;;;;;;;;;;;;"}